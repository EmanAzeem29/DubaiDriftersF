<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Terms and Conditions - Dubai Drifters</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    body { 
      font-family: 'Poppins', sans-serif; 
      background-color: #FDF6EC;
    }
    
    @keyframes fadeDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .animate-fadeDown { animation: fadeDown 0.6s ease-out; }
    .animate-fadeUp { animation: fadeUp 0.6s ease-out 0.2s; }
    
    /* Mobile menu styles */
    .mobile-menu {
        transition: all 0.3s ease;
        max-height: 0;
        overflow: hidden;
    }
    
    .mobile-menu.open {
        max-height: 500px;
    }
    
    .terms-section {
      transition: all 0.3s ease;
    }
    
    .terms-section:hover {
      background-color: #f9f9f9;
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    
    .quick-nav-link {
      transition: all 0.2s ease;
    }
    
    .quick-nav-link:hover {
      background-color: #C89B52 !important;
      color: white !important;
    }
    
    .loading-spinner {
      border: 2px solid #f3f3f3;
      border-top: 2px solid #3498db;
      border-radius: 50%;
      width: 16px;
      height: 16px;
      animation: spin 1s linear infinite;
      margin-left: 8px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Active section highlighting */
    .active-section {
      background-color: #f0f9ff !important;
      border-left: 4px solid #C89B52 !important;
    }

    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 20px;
      border-radius: 8px;
      color: white;
      z-index: 1000;
      transform: translateX(400px);
      transition: transform 0.3s ease;
    }

    .toast.show {
      transform: translateX(0);
    }

    .toast.success {
      background-color: #10B981;
    }

    .toast.error {
      background-color: #EF4444;
    }

    .toast.info {
      background-color: #3B82F6;
    }
  </style>
</head>
<body class="bg-gray-50">

  <!-- Header -->
  <header class="bg-gradient-to-r from-black via-[#1a1a1a] to-[#0d0d0d] shadow-lg sticky top-0 z-50 transition-all duration-300 ease-in-out">
    <div class="container mx-auto px-4">
      <div class="flex justify-between items-center py-2 animate-fadeDown">
        <!-- Logo + Name -->
        <a href="index.html" class="flex items-center space-x-4">
          <img src="logo.jpg" alt="Logo" 
               class="h-16 w-16 rounded-full object-cover border-4 border-[#C89B52] shadow-lg hover:scale-110 transition-transform duration-300"
               onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiByeD0iMzIiIGZpbGw9IiNDODlCNTIiLz4KPHN2Zz4K'"/>
          <span class="text-2xl font-bold tracking-wide text-[#C89B52]">Dubai Drifters</span>
        </a>
        
        <!-- Desktop Menu -->
        <div class="hidden md:flex items-center space-x-6 text-sm text-white font-medium">
          <a class="hover:text-[#C89B52] transition-colors duration-300 hover:scale-105" href="about.html">About Us</a>
          <a class="hover:text-[#C89B52] transition-colors duration-300 hover:scale-105" href="contact.html">Contact Us</a>
          <a class="hover:text-[#C89B52] transition-colors duration-300 hover:scale-105" href="blog.html">Blog</a>

          <!-- Currency Dropdown -->
          <div class="relative group">
            <button id="currencyBtn" class="flex items-center hover:text-[#C89B52] transition duration-300">
              <span id="currencyText">USD</span>
              <span class="material-icons text-sm">expand_more</span>
            </button>
            <ul id="currencyDropdown" class="absolute right-0 mt-2 w-28 bg-[#1a1a1a] border border-[#C89B52] shadow-md rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transform scale-y-0 group-hover:scale-y-100 origin-top transition-all duration-300 text-white">
              <li class="px-4 py-2 hover:bg-[#C89B52] cursor-pointer">USD</li>
              <li class="px-4 py-2 hover:bg-[#C89B52] cursor-pointer">AED</li>
              <li class="px-4 py-2 hover:bg-[#C89B52] cursor-pointer">EUR</li>
              <li class="px-4 py-2 hover:bg-[#C89B52] cursor-pointer">GBP</li>
            </ul>
          </div>

          <!-- Language Dropdown -->
          <div class="relative group">
            <button id="languageBtn" class="flex items-center hover:text-[#C89B52] transition duration-300">
              <img alt="USA Flag" class="h-4 w-6 mr-2 rounded-sm shadow" src="https://flagcdn.com/w20/us.png"/>
              <span id="langText">English</span>
              <span class="material-icons text-sm">expand_more</span>
            </button>
            <ul id="languageDropdown" class="absolute right-0 mt-2 w-32 bg-[#1a1a1a] border border-[#C89B52] shadow-md rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transform scale-y-0 group-hover:scale-y-100 origin-top transition-all duration-300 text-white">
              <li class="px-4 py-2 hover:bg-[#C89B52] cursor-pointer">English</li>
              <li class="px-4 py-2 hover:bg-[#C89B52] cursor-pointer">Arabic</li>
              <li class="px-4 py-2 hover:bg-[#C89B52] cursor-pointer">French</li>
              <li class="px-4 py-2 hover:bg-[#C89B52] cursor-pointer">Chinese</li>
            </ul>
          </div>

          <a class="flex items-center hover:text-[#C89B52] transition duration-300 hover:scale-105" href="signin.html">
            <span class="material-icons text-lg mr-1">person</span>
            <span>Sign In</span>
          </a>
        </div>
        
        <!-- Mobile Menu Button -->
        <div class="md:hidden">
          <button id="mobileMenuBtn" class="text-white hover:text-[#C89B52] transition duration-300">
            <span class="material-icons">menu</span>
          </button>
        </div>
      </div>

      <hr class="opacity-20 border-[#C89B52]"/>

      <!-- Desktop Nav Links -->
      <nav class="hidden md:flex justify-center items-center py-3 space-x-8 text-sm font-semibold text-white animate-fadeUp">
        <a href="index.html" class="hover:text-[#C89B52] transition duration-300 hover:scale-105">Home</a>
        <a href="tours.html" class="hover:text-[#C89B52] transition duration-300 hover:scale-105">Tours</a>
        <a href="visa.html" class="hover:text-[#C89B52] transition duration-300 hover:scale-105">Visa</a>
        <a href="about.html" class="hover:text-[#C89B52] transition duration-300 hover:scale-105">About Us</a>
        <a href="blog.html" class="hover:text-[#C89B52] transition duration-300 hover:scale-105">Blog</a>
        <a href="contact.html" class="hover:text-[#C89B52] transition duration-300 hover:scale-105">Contact</a>
      </nav>
      
      <!-- Mobile Menu -->
      <div id="mobileMenu" class="mobile-menu md:hidden bg-[#1a1a1a] rounded-b-lg shadow-lg">
        <div class="py-4 px-4 space-y-4">
          <a class="block text-white hover:text-[#C89B52] transition duration-300" href="index.html">Home</a>
          <a class="block text-white hover:text-[#C89B52] transition duration-300" href="tours.html">Tours</a>
          <a class="block text-white hover:text-[#C89B52] transition duration-300" href="visa.html">Visa</a>
          <a class="block text-white hover:text-[#C89B52] transition duration-300" href="about.html">About Us</a>
          <a class="block text-white hover:text-[#C89B52] transition duration-300" href="blog.html">Blog</a>
          <a class="block text-white hover:text-[#C89B52] transition duration-300" href="contact.html">Contact</a>
        </div>
      </div>
    </div>
  </header>

  <!-- Toast Container -->
  <div id="toastContainer"></div>

  <!-- Hero Section -->
  <section class="relative bg-cover bg-center h-72" style="background-image: url('https://source.unsplash.com/1600x900/?dubai,legal');">
    <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center">
      <div class="text-center text-white">
        <h1 class="text-4xl md:text-5xl font-bold mb-4">Terms and Conditions</h1>
        <p class="text-lg md:text-xl">Please read these terms carefully before using our services</p>
      </div>
    </div>
  </section>

  <!-- Terms Content -->
  <section class="py-16 container mx-auto px-4">
    <div class="max-w-4xl mx-auto">
      <!-- Quick Navigation -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-8 sticky top-24 z-10">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Quick Navigation</h3>
        <div class="flex flex-wrap gap-2" id="quickNav">
          <a href="#user-responsibilities" class="quick-nav-link bg-gray-100 hover:bg-gray-200 text-gray-800 px-3 py-1 rounded-full text-sm transition">User Responsibilities</a>
          <a href="#booking-policies" class="quick-nav-link bg-gray-100 hover:bg-gray-200 text-gray-800 px-3 py-1 rounded-full text-sm transition">Booking Policies</a>
          <a href="#payment-terms" class="quick-nav-link bg-gray-100 hover:bg-gray-200 text-gray-800 px-3 py-1 rounded-full text-sm transition">Payment Terms</a>
          <a href="#cancellation-policies" class="quick-nav-link bg-gray-100 hover:bg-gray-200 text-gray-800 px-3 py-1 rounded-full text-sm transition">Cancellation Policies</a>
          <a href="#privacy" class="quick-nav-link bg-gray-100 hover:bg-gray-200 text-gray-800 px-3 py-1 rounded-full text-sm transition">Privacy</a>
          <a href="#disclaimers" class="quick-nav-link bg-gray-100 hover:bg-gray-200 text-gray-800 px-3 py-1 rounded-full text-sm transition">Disclaimers</a>
        </div>
      </div>

      <!-- Last Updated -->
      <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-8">
        <div class="flex">
          <div class="flex-shrink-0">
            <span class="material-icons text-blue-400">info</span>
          </div>
          <div class="ml-3">
            <p class="text-sm text-blue-700">
              <span class="font-medium">Last Updated:</span> <span id="lastUpdatedDate">January 1, 2025</span>
            </p>
          </div>
        </div>
      </div>

      <!-- Terms Sections -->
      <div class="space-y-8">
        <!-- User Responsibilities -->
        <div id="user-responsibilities" class="terms-section bg-white rounded-lg shadow-md p-6">
          <div class="flex items-center mb-4">
            <div class="w-10 h-10 bg-[#C89B52] rounded-full flex items-center justify-center mr-4">
              <span class="material-icons text-white">person</span>
            </div>
            <h2 class="text-2xl font-bold text-gray-800">User Responsibilities</h2>
          </div>
          <p class="text-gray-600 leading-relaxed">
            Users are responsible for providing accurate information during booking and complying with all tour guidelines and safety instructions provided by Dubaidrifters.com.
            Failure to do so may result in cancellation of services without refund.
          </p>
          <ul class="mt-4 space-y-2 text-gray-600">
            <li class="flex items-start">
              <span class="material-icons text-[#C89B52] text-sm mr-2 mt-1">check_circle</span>
              <span>Provide accurate personal and contact information</span>
            </li>
            <li class="flex items-start">
              <span class="material-icons text-[#C89B52] text-sm mr-2 mt-1">check_circle</span>
              <span>Follow all safety guidelines during tours</span>
            </li>
            <li class="flex items-start">
              <span class="material-icons text-[#C89B52] text-sm mr-2 mt-1">check_circle</span>
              <span>Respect local customs and regulations</span>
            </li>
          </ul>
        </div>

        <!-- Booking Policies -->
        <div id="booking-policies" class="terms-section bg-white rounded-lg shadow-md p-6">
          <div class="flex items-center mb-4">
            <div class="w-10 h-10 bg-[#C89B52] rounded-full flex items-center justify-center mr-4">
              <span class="material-icons text-white">event</span>
            </div>
            <h2 class="text-2xl font-bold text-gray-800">Booking Policies</h2>
          </div>
          <p class="text-gray-600 leading-relaxed">
            Bookings must be made through the official Dubaidrifters.com website or authorized agents. Confirmation of booking is subject to availability and receipt of full
            payment. Dubaidrifters.com reserves the right to refuse any booking at its discretion.
          </p>
          <div class="mt-4 bg-yellow-50 border-l-4 border-yellow-400 p-4">
            <p class="text-sm text-yellow-700">
              <span class="font-medium">Note:</span> All bookings are subject to availability. We recommend booking at least 48 hours in advance for popular tours.
            </p>
          </div>
        </div>

        <!-- Payment Terms -->
        <div id="payment-terms" class="terms-section bg-white rounded-lg shadow-md p-6">
          <div class="flex items-center mb-4">
            <div class="w-10 h-10 bg-[#C89B52] rounded-full flex items-center justify-center mr-4">
              <span class="material-icons text-white">payment</span>
            </div>
            <h2 class="text-2xl font-bold text-gray-800">Payment Terms</h2>
          </div>
          <p class="text-gray-600 leading-relaxed">
            Full payment is required at the time of booking unless otherwise specified. Payments can be made via credit card, debit card, or other methods as indicated on the
            website. All prices are listed in the local currency and are inclusive of applicable taxes unless stated otherwise.
          </p>
          <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-gray-50 p-4 rounded-lg">
              <h4 class="font-semibold text-gray-800 mb-2">Accepted Payment Methods</h4>
              <ul class="text-sm text-gray-600 space-y-1">
                <li>Visa, MasterCard, American Express</li>
                <li>PayPal</li>
                <li>Bank Transfer (for group bookings)</li>
              </ul>
            </div>
            <div class="bg-gray-50 p-4 rounded-lg">
              <h4 class="font-semibold text-gray-800 mb-2">Currency Information</h4>
              <ul class="text-sm text-gray-600 space-y-1">
                <li>All transactions are processed in AED</li>
                <li>Exchange rates may apply for foreign cards</li>
                <li>No hidden fees or charges</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Cancellation Policies -->
        <div id="cancellation-policies" class="terms-section bg-white rounded-lg shadow-md p-6">
          <div class="flex items-center mb-4">
            <div class="w-10 h-10 bg-[#C89B52] rounded-full flex items-center justify-center mr-4">
              <span class="material-icons text-white">cancel</span>
            </div>
            <h2 class="text-2xl font-bold text-gray-800">Cancellation Policies</h2>
          </div>
          <p class="text-gray-600 leading-relaxed">
            Cancellations made more than 30 days prior to the tour date will receive a full refund. Cancellations made between 15 and 29 days prior to the tour date will receive
            a 50% refund. No refunds will be issued for cancellations made within 14 days of the tour date. Dubaidrifters.com reserves the right to cancel tours due to unforeseen
            circumstances, in which case a full refund will be provided.
          </p>
          <div class="mt-6 overflow-x-auto">
            <table class="w-full text-sm text-left text-gray-600">
              <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                <tr>
                  <th class="px-4 py-3">Cancellation Period</th>
                  <th class="px-4 py-3">Refund Amount</th>
                </tr>
              </thead>
              <tbody>
                <tr class="bg-white border-b">
                  <td class="px-4 py-3">More than 30 days before tour</td>
                  <td class="px-4 py-3 font-medium text-green-600">100% refund</td>
                </tr>
                <tr class="bg-gray-50 border-b">
                  <td class="px-4 py-3">15-29 days before tour</td>
                  <td class="px-4 py-3 font-medium text-yellow-600">50% refund</td>
                </tr>
                <tr class="bg-white">
                  <td class="px-4 py-3">Less than 14 days before tour</td>
                  <td class="px-4 py-3 font-medium text-red-600">No refund</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Privacy -->
        <div id="privacy" class="terms-section bg-white rounded-lg shadow-md p-6">
          <div class="flex items-center mb-4">
            <div class="w-10 h-10 bg-[#C89B52] rounded-full flex items-center justify-center mr-4">
              <span class="material-icons text-white">lock</span>
            </div>
            <h2 class="text-2xl font-bold text-gray-800">Privacy</h2>
          </div>
          <p class="text-gray-600 leading-relaxed">
            Dubaidrifters.com respects your privacy and will handle your personal information in accordance with our Privacy Policy, available on our website. By using our
            services, you consent to the collection and use of your information as described in the Privacy Policy.
          </p>
          <div class="mt-4 bg-blue-50 border-l-4 border-blue-400 p-4">
            <p class="text-sm text-blue-700">
              <span class="font-medium">Your Rights:</span> You have the right to access, correct, or delete your personal data. Contact us for any privacy-related concerns.
            </p>
          </div>
        </div>

        <!-- Disclaimers -->
        <div id="disclaimers" class="terms-section bg-white rounded-lg shadow-md p-6">
          <div class="flex items-center mb-4">
            <div class="w-10 h-10 bg-[#C89B52] rounded-full flex items-center justify-center mr-4">
              <span class="material-icons text-white">warning</span>
            </div>
            <h2 class="text-2xl font-bold text-gray-800">Disclaimers</h2>
          </div>
          <p class="text-gray-600 leading-relaxed">
            Dubaidrifters.com is not liable for any loss, damage, injury, or delay arising from participation in our tours, including but not limited to accidents, theft, or acts
            of nature. Participants are advised to obtain appropriate travel insurance. Dubaidrifters.com reserves the right to modify tour itineraries and prices without prior
            notice.
          </p>
          <div class="mt-4 bg-red-50 border-l-4 border-red-400 p-4">
            <p class="text-sm text-red-700">
              <span class="font-medium">Important:</span> We strongly recommend purchasing comprehensive travel insurance that covers cancellation, medical expenses, and personal liability.
            </p>
          </div>
        </div>
      </div>

      <!-- Acceptance Section -->
      <div class="mt-12 bg-gray-100 rounded-lg p-6 text-center">
        <h3 class="text-xl font-bold text-gray-800 mb-4">Acceptance of Terms</h3>
        <p class="text-gray-600 mb-6">
          By using our website and services, you acknowledge that you have read, understood, and agree to be bound by these Terms and Conditions.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <button id="acceptTerms" class="inline-flex items-center bg-[#C89B52] hover:bg-[#b38642] text-white font-semibold px-6 py-3 rounded-lg shadow-lg transition">
            <span class="material-icons mr-2">check_circle</span>
            <span id="acceptTermsText">I Accept the Terms</span>
            <div id="acceptTermsSpinner" class="loading-spinner hidden ml-2"></div>
          </button>
          <a href="contact.html" class="inline-flex items-center bg-gray-600 hover:bg-gray-700 text-white font-semibold px-6 py-3 rounded-lg shadow-lg transition">
            <span class="material-icons mr-2">help</span>
            Contact Us with Questions
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white">
    <div class="container mx-auto px-4 py-10">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h4 class="font-bold text-lg mb-4">About Dubaidrifters.com</h4>
          <p class="text-sm text-gray-400">Your trusted partner for exploring the wonders of Dubai. We provide a wide range of tours, activities, and travel services to make your trip memorable.</p>
        </div>
        <div>
          <h4 class="font-bold text-lg mb-4">Support</h4>
          <ul class="space-y-2 text-sm">
            <li><a class="text-gray-400 hover:text-white" href="contact.html">Contact Us</a></li>
            <li><a class="text-gray-400 hover:text-white" href="#">FAQs</a></li>
            <li><a class="text-gray-400 hover:text-white" href="termsandconditions.html">Terms & Conditions</a></li>
            <li><a class="text-gray-400 hover:text-white" href="#">Privacy Policy</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-bold text-lg mb-4">Follow Us</h4>
          <div class="flex space-x-2">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
            <!-- Facebook -->
            <a class="text-gray-400 hover:text-white" href="https://www.facebook.com/YourPageName" target="_blank">
              <i class="fab fa-facebook"></i>
            </a>

            <!-- WhatsApp -->
            <a class="text-gray-400 hover:text-white" href="https://wa.me/923001234567" target="_blank">
              <i class="fab fa-whatsapp"></i>
            </a>

            <!-- Instagram -->
            <a class="text-gray-400 hover:text-white" href="https://www.instagram.com/YourUsername" target="_blank">
              <i class="fab fa-instagram"></i>
            </a>
          </div>
          <h4 class="font-bold text-lg mt-6 mb-4">Payment Methods</h4>
          <div class="flex space-x-2">
            <a href="https://www.easypaisa.com.pk" 
               target="_blank" 
               rel="noopener noreferrer"
               class="text-xs bg-gray-700 px-2 py-1 rounded hover:bg-gray-600 transition">
               EasyPaisa
            </a>
          </div>
        </div>
        <div>
          <h4 class="font-bold text-lg mb-4">Newsletter</h4>
          <p class="text-sm text-gray-400 mb-4">Subscribe to our newsletter for exclusive offers and updates.</p>
          <form id="newsletterForm" class="flex">
            <input id="newsletterEmail" class="w-full rounded-l-md p-2 text-gray-800 focus:outline-none" placeholder="Your email" type="email" required/>
            <button id="newsletterBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 rounded-r-md transition-colors flex items-center" type="submit">
              <span id="newsletterBtnText">Subscribe</span>
              <div id="newsletterSpinner" class="loading-spinner hidden"></div>
            </button>
          </form>
        </div>
      </div>
      <div class="border-t border-gray-700 mt-8 pt-6 text-center text-sm text-gray-500">
        <p>Â© 2025 Dubaidrifters.com. All Rights Reserved.</p>
      </div>
    </div>
  </footer>
  
  <script>
    // API Configuration - Update these with your actual backend endpoints
    const API_CONFIG = {
      BASE_URL: 'https://your-backend-domain.com/api',
      ENDPOINTS: {
        ACCEPT_TERMS: '/user/accept-terms',
        SUBSCRIBE_NEWSLETTER: '/newsletter/subscribe',
        GET_TERMS_VERSION: '/terms/version'
      }
    };

    // Utility Functions
    const showToast = (message, type = 'info', duration = 5000) => {
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.innerHTML = `
        <div class="flex items-center">
          <span class="material-icons mr-2">${type === 'success' ? 'check_circle' : type === 'error' ? 'error' : 'info'}</span>
          ${message}
        </div>
      `;
      
      document.getElementById('toastContainer').appendChild(toast);
      
      setTimeout(() => {
        toast.classList.add('show');
      }, 100);
      
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => {
          toast.remove();
        }, 300);
      }, duration);
    };

    // API Functions
    const acceptTerms = async (userId) => {
      try {
        const response = await fetch(`${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.ACCEPT_TERMS}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            userId: userId,
            termsVersion: '1.0',
            acceptedAt: new Date().toISOString()
          })
        });
        
        if (!response.ok) {
          throw new Error('Failed to accept terms');
        }
        
        const data = await response.json();
        return { success: true, data };
      } catch (error) {
        console.error('Terms acceptance error:', error);
        return { success: false, error: error.message };
      }
    };

    const subscribeToNewsletter = async (email) => {
      try {
        const response = await fetch(`${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.SUBSCRIBE_NEWSLETTER}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            email: email,
            subscribedAt: new Date().toISOString(),
            source: 'terms-page'
          })
        });
        
        if (!response.ok) {
          throw new Error('Newsletter subscription failed');
        }
        
        const data = await response.json();
        return { success: true, data };
      } catch (error) {
        console.error('Newsletter subscription error:', error);
        return { success: false, error: error.message };
      }
    };

    const getTermsVersion = async () => {
      try {
        const response = await fetch(`${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.GET_TERMS_VERSION}`);
        
        if (!response.ok) {
          throw new Error('Failed to fetch terms version');
        }
        
        const data = await response.json();
        return { success: true, data };
      } catch (error) {
        console.error('Terms version fetch error:', error);
        return { success: false, error: error.message };
      }
    };

    document.addEventListener("DOMContentLoaded", function() {
      // Mobile menu toggle
      const mobileMenuBtn = document.getElementById("mobileMenuBtn");
      const mobileMenu = document.getElementById("mobileMenu");
      
      if(mobileMenuBtn && mobileMenu) {
        mobileMenuBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          mobileMenu.classList.toggle("open");
          // Change icon based on state
          const icon = mobileMenuBtn.querySelector(".material-icons");
          if(mobileMenu.classList.contains("open")) {
            icon.textContent = "close";
          } else {
            icon.textContent = "menu";
          }
        });
        
        // Close mobile menu when clicking outside
        document.addEventListener("click", (e) => {
          if(!mobileMenu.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
            mobileMenu.classList.remove("open");
            mobileMenuBtn.querySelector(".material-icons").textContent = "menu";
          }
        });
      }

      // Dropdown functionality
      const currencyBtn = document.getElementById("currencyBtn");
      const currencyMenu = document.getElementById("currencyDropdown");
      const languageBtn = document.getElementById("languageBtn");
      const languageMenu = document.getElementById("languageDropdown");

      // Currency dropdown
      if(currencyBtn && currencyMenu) {
        currencyBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          currencyMenu.classList.toggle("hidden");
          if(languageMenu) languageMenu.classList.add("hidden");
        });
        
        currencyMenu.querySelectorAll("li").forEach(item => {
          item.addEventListener("click", () => {
            document.getElementById("currencyText").textContent = item.textContent;
            currencyMenu.classList.add("hidden");
          });
        });
      }

      // Language dropdown
      if(languageBtn && languageMenu) {
        languageBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          languageMenu.classList.toggle("hidden");
          if(currencyMenu) currencyMenu.classList.add("hidden");
        });
        
        languageMenu.querySelectorAll("li").forEach(item => {
          item.addEventListener("click", () => {
            document.getElementById("langText").textContent = item.textContent;
            languageMenu.classList.add("hidden");
          });
        });
      }

      // Close dropdowns when clicking elsewhere
      document.addEventListener("click", () => {
        if(currencyMenu) currencyMenu.classList.add("hidden");
        if(languageMenu) languageMenu.classList.add("hidden");
      });

      // Smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });

      // Newsletter subscription
      const newsletterForm = document.getElementById("newsletterForm");
      const newsletterBtn = document.getElementById("newsletterBtn");
      const newsletterBtnText = document.getElementById("newsletterBtnText");
      const newsletterSpinner = document.getElementById("newsletterSpinner");
      
      if(newsletterForm) {
        newsletterForm.addEventListener("submit", async function(e) {
          e.preventDefault();
          
          const email = document.getElementById("newsletterEmail").value;
          
          // Validate email
          if(!email || !email.includes("@")) {
            showToast("Please enter a valid email address", "error");
            return;
          }
          
          // Show loading state
          newsletterBtnText.textContent = "Subscribing...";
          newsletterSpinner.classList.remove("hidden");
          newsletterBtn.disabled = true;
          
          try {
            const result = await subscribeToNewsletter(email);
            
            if (result.success) {
              // Reset form
              newsletterForm.reset();
              showToast("Thank you for subscribing to our newsletter!", "success");
            } else {
              showToast(result.error || "Subscription failed. Please try again.", "error");
            }
          } catch (error) {
            console.error("Newsletter subscription error:", error);
            showToast("An error occurred. Please try again.", "error");
          } finally {
            // Reset button
            newsletterBtnText.textContent = "Subscribe";
            newsletterSpinner.classList.add("hidden");
            newsletterBtn.disabled = false;
          }
        });
      }

      // Terms acceptance
      const acceptTermsBtn = document.getElementById("acceptTerms");
      const acceptTermsText = document.getElementById("acceptTermsText");
      const acceptTermsSpinner = document.getElementById("acceptTermsSpinner");
      
      if(acceptTermsBtn) {
        acceptTermsBtn.addEventListener("click", async function() {
          // Get current user from localStorage (if logged in)
          const currentUser = JSON.parse(localStorage.getItem("currentUser"));
          const userId = currentUser ? currentUser.id : null;
          
          // Show loading state
          acceptTermsText.textContent = "Accepting Terms...";
          acceptTermsSpinner.classList.remove("hidden");
          acceptTermsBtn.disabled = true;

          try {
            // Send acceptance to backend if user is logged in
            if (userId) {
              const result = await acceptTerms(userId);
              if (!result.success) {
                console.warn('Failed to sync terms acceptance with backend:', result.error);
              }
            }
            
            // Store acceptance in localStorage
            localStorage.setItem("termsAccepted", "true");
            localStorage.setItem("termsAcceptedAt", new Date().toISOString());
            localStorage.setItem("termsVersion", "1.0");
            
            showToast("Thank you for accepting our Terms and Conditions!", "success");
            
            // Redirect to home page after delay
            setTimeout(() => {
              window.location.href = "index.html";
            }, 1500);
            
          } catch (error) {
            console.error("Terms acceptance error:", error);
            showToast("An error occurred. Please try again.", "error");
          } finally {
            // Reset button state
            acceptTermsText.textContent = "I Accept the Terms";
            acceptTermsSpinner.classList.add("hidden");
            acceptTermsBtn.disabled = false;
          }
        });
      }

      // Set current date for last updated
      const lastUpdatedDate = document.getElementById("lastUpdatedDate");
      if(lastUpdatedDate) {
        const today = new Date();
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        lastUpdatedDate.textContent = today.toLocaleDateString('en-US', options);
      }

      // Active section highlighting
      const sections = document.querySelectorAll('.terms-section');
      const navLinks = document.querySelectorAll('.quick-nav-link');
      
      // Highlight active section on scroll
      function highlightActiveSection() {
        let current = '';
        
        sections.forEach(section => {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.clientHeight;
          
          if (window.scrollY >= (sectionTop - 150)) {
            current = section.getAttribute('id');
          }
        });
        
        navLinks.forEach(link => {
          link.classList.remove('bg-[#C89B52]', 'text-white');
          link.classList.add('bg-gray-100', 'text-gray-800');
          
          if (link.getAttribute('href') === `#${current}`) {
            link.classList.remove('bg-gray-100', 'text-gray-800');
            link.classList.add('bg-[#C89B52]', 'text-white');
          }
        });
      }
      
      // Initial call
      highlightActiveSection();
      
      // Listen for scroll events
      window.addEventListener('scroll', highlightActiveSection);
      
      // Print functionality
      const printButton = document.createElement('button');
      printButton.innerHTML = '<span class="material-icons mr-2">print</span> Print Terms';
      printButton.className = 'fixed bottom-6 right-6 bg-[#C89B52] hover:bg-[#b38642] text-white font-semibold px-4 py-2 rounded-lg shadow-lg transition flex items-center z-50';
      printButton.addEventListener('click', function() {
        window.print();
      });
      document.body.appendChild(printButton);

      // Check if user has already accepted terms
      const termsAccepted = localStorage.getItem("termsAccepted");
      if (termsAccepted === "true") {
        // Update button state if terms already accepted
        const acceptTermsBtn = document.getElementById("acceptTerms");
        if (acceptTermsBtn) {
          acceptTermsBtn.innerHTML = '<span class="material-icons mr-2">check_circle</span> Terms Accepted';
          acceptTermsBtn.disabled = true;
          acceptTermsBtn.classList.remove('hover:bg-[#b38642]');
          acceptTermsBtn.classList.add('bg-green-600', 'cursor-default');
        }
      }
    });
  </script>
</body>
</html>